---
output: html_document
editor_options: 
  chunk_output_type: console
title: "Data Science for Public Policy, Assignment 3"
author: "Ritika Iyer"
date: "2/14/2020"
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE) 
```

```{r load-packages, message = FALSE}
library(tidyverse)
library(haven)
library(readxl)
```

```{r load-data, message = FALSE}
younglives_data <- read_excel("younglives-data.xlsx")
```


## Introduction
The data used in this assignment is from the Young Lives: an International Study of Childhood Poverty project, collected by the U.K. Data Service. This is a longitudinal dataset following two cohorts of children every 3-4 years from 2002 to 2016 in India. The specific data used in this project is from 2006 and focuses on two states on India's east coast, Telangana and Andhra Pradesh.

The project’s key objectives are to “improve the understanding of causes and consequences of childhood poverty and to inform and the development and implementation of future policies and practices that will reduce childhood poverty” (Young Lives). This project will discuss a few of the key variables and relationships relevant to childhood poverty in India.

```{r viewdata, message = FALSE}
younglives_data
```


## Child Body Mass Index and Household Food Expenditures
This first visualization looks at the relationship between household expenditure on food and their children's Body Mass Index (BMI). I would expect that children with higher BMIs are from households that spend more on food. In the context of poor, often rural Indian households, increased expenditure on food can imply more purchases of healthier and fresher foods which are usually more expensive.

We see that in this sample, most children's BMI is between 10 and 16. According to BMI standards, children with a BMI below 18.5 is considered to be underweight. Though this visualization only considers two variables, it does establish a potential relationship to consider in addressing children's health related to improving households' ability to increase food spending versus non-food spending.

```{r viz1-code, message=FALSE}
ggplot(data = younglives_data, 
       mapping = aes(x=bmi_r2, 
                     y=foodexp_r2)) +
  geom_point(size = 0.4, color = "orange") +
  scale_y_continuous(limits = c(0, 5000)) +
  scale_x_continuous(limits = c(10, 18), breaks = c(10, 14, 18)) +
  theme_minimal() +
  theme(legend.position = "bottom",
        legend.title=element_blank()) +
  labs(title =
         paste("Annual Food Expenditure and BMI are positively, not strongly correlated"),
       subtitle = "Despite variation in spending, all children are in underweight BMI category",
       caption = "Source: Young Lives Survey, 2006",
       x = "Body Mass Index (BMI)",
       y = "Annual Food Expenditures (in Rupees)")
```


## Wealth and Housing Quality in Rural versus Urban Areas
This next visualization looks at the differences in the relationship between a wealth index and housing quality index in rural versus urban areas. We see that in rural areas, the slope of the fitted line is steeper than that of urban areas - this may imply that the impact of an increase in wealth has a much larger potential impact on housing quality (and vice versa) than the same increase in wealth for an urban household. 

Additionally, the graph shows that urban households are overall slightly richer and live in higher quality housing than rural households. This is noted by the higher concentration of points in the lower left sections of the rural graph, as compared to the urban graph. When considering policy programs at a state- or country-level, it is important to keep in mind that livelihoods and the potential impact of a policy in improving those livelihoods can be very different across rural and urban areas. 

```{r viz2-code, message=FALSE}
ggplot(data = younglives_data,
       mapping = aes(x = wi_r2, y = hq_r2)) +
  geom_smooth(method="loess", size = 0.5, linetype="longdash",
              color = "blue", se = FALSE) +
  geom_point(alpha = 0.2, color = "orange", size=1) +
  facet_wrap(~typesite_r2, ncol=2) +
  labs(y = "Housing Quality Index", x = "Wealth Index") +
  theme_minimal() +
  theme(plot.margin = unit(c(1,1,1,1), "cm")) +
  labs(title = 
         paste("Wealth and housing quality varies across rural, urban areas in India"),
       subtitle = "More urban households have higher wealth, housing quality",
       caption = "Source: Young Lives Survey, 2006",
       x = "Wealth Index",
       y = "Housing Quality Index")
```


## Parental Attitudes on Children's Educational Attainment, by Region
The visualization below seeks to gain insight on how parents view their childrens' educational future across regions in East India. We see that most parents in all regions want their children to attend University. However, the second highest group in all regions is that parents hope their children will complete at least up till 10th grade. 

Comparatively, parents in Telangana seem to have more confidence that their children will attend University. Coastal Andhra Pradesh seems more split. This type of visualization is important from a policy perspective because it shows differences in culture and attitudes across seemingly similar geographic locations. The regions presented are relatively close to each other, but still show different outcomes. In considering the targeting of a policy solution, it is critical to take into account regional variation in the scope and extremity of the policy problem itself. 

```{r viz3-code, message=FALSE}
ggplot(data = younglives_data, 
         aes(gradlike)) +
  geom_bar() +
  coord_flip() + 
  facet_wrap(~region_r2, ncol=3) +
  labs(title = 
         paste("Parental attitudes on children's educational attainment vary by region"),
       subtitle = "Telangana parents have slightly higher expectations for children to attend university",
       caption = "Source: Young Lives Survey, 2006",
       x = "Projected Children's Educational Attainment",
       y = "Number of Households")
```
